webpackJsonp([1,2,4,5,6,7],{"6QcU":function(e,t){},"J+R/":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("VTQS"),s=a("WdI8"),r={data:function(){return{login:"",password:"",radio:"login",isLogin:!1}},computed:{},methods:{log_out:function(){Object(s.c)(),this.isLogin=Object(s.b)()},log_in:function(){var e=this;n.b.auth(this.login,this.password,this.radio).then(function(t){void 0!==t.data.message?alert(t.data.message):(e.isLogin=Object(s.b)(),e.$emit("login"))}).catch(function(e){console.log(["auth error",e])})}},mounted:function(){this.isLogin=Object(s.b)()}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("form",{on:{submit:function(t){t.preventDefault(),e.log_in()}}},[a("md-card",{staticClass:"md-layout-item md-size-15",staticStyle:{margin:"auto"}},[a("md-card-content",[a("md-field",[a("label",[e._v("Login")]),e._v(" "),a("md-input",{attrs:{type:"text",required:""},model:{value:e.login,callback:function(t){e.login="string"==typeof t?t.trim():t},expression:"login"}})],1),e._v(" "),a("md-field",[a("label",[e._v("Password")]),e._v(" "),a("md-input",{attrs:{type:"password",required:""},model:{value:e.password,callback:function(t){e.password="string"==typeof t?t.trim():t},expression:"password"}})],1),e._v(" "),a("md-radio",{attrs:{value:"registration"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("Registration")]),e._v(" "),a("md-radio",{attrs:{value:"login"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("Login")]),e._v(" "),a("md-button",{attrs:{type:"submit",disabled:e.isLogin}},[e._v("Send")]),e._v(" "),a("md-button",{attrs:{disabled:!e.isLogin},on:{click:function(t){e.log_out()}}},[e._v("Logout")])],1)],1)],1)])},staticRenderFns:[]},i=a("VU/8")(r,o,!1,null,null,null);t.default=i.exports},OVkK:function(e,t){},lO7g:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("N1EC"),s=a("KYvs"),r=a("Ty68"),o={data:function(){return{timer:null}},methods:{refreshData:function(){this.$refs.taskStop.getCurrentTask(),this.$refs.taskAdd.getCompletitions(),this.$refs.tasks.refreshDate(),this.$refs.tasks.getTasks()}},components:{Tasks:n.default,TaskAdd:s.default,TaskStop:r.default},mounted:function(){this.timer=setInterval(this.refreshData,6e4)},destroyed:function(){clearInterval(this.timer)}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._m(0),e._v(" "),a("TaskStop",{ref:"taskStop",on:{"stop-task":e.refreshData}}),e._v(" "),a("TaskAdd",{ref:"taskAdd",on:{"add-task":e.refreshData}}),e._v(" "),a("Tasks",{ref:"tasks",on:{update:function(t){e.refreshData()}}})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"md-layout md-gutter md-alignment-top-center"},[t("div",{staticClass:"md-layout-item md-large-size-50 md-xlarge-size-50 md-medium-size-70 md-small-size-100"})])}]},c=a("VU/8")(o,i,!1,null,null,null);t.default=c.exports},niH5:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("VTQS"),s={data:function(){return{trackers:[],evoUsers:[],evoUser:"",projects:null,loginToken:"",passwordToken:"",currentTracker:{id:0,title:"",api_url:"",type:"redmine"},showTracker:!1,showUser:!1,showToken:!1}},methods:{getTrackers:function(){var e=this;n.b.getTrackers().then(function(t){console.log(t),e.trackers=t.data.trackers}).catch(function(e){console.log(["getTasks error",e])})},getEvoUsers:function(){var e=this;n.b.getEvoUsers().then(function(t){console.log(t),e.evoUsers=t.data.users}).catch(function(e){console.log(["getEvoUsers error",e])})},showTrackerModal:function(){this.showTracker=!0},closeTrackerModal:function(){this.showTracker=!1},deleteTracker:function(e){var t=this;confirm("вы действительно хотите удалить трекер из списка?")&&n.b.deleteTracker(this.currentTracker).then(function(e){console.log(e),t.getTrackers(),t.showTracker=!1}).catch(function(e){console.log(["getToken error",e])})},saveTracker:function(){var e=this;n.b.saveTracker(this.currentTracker).then(function(t){console.log(t),e.getTrackers(),e.showTracker=!1}).catch(function(e){console.log(["getToken error",e])})},saveEvoUser:function(){var e=this;n.b.saveEvoUser(this.evoUser).then(function(t){console.log(t),e.getTrackers(),e.showUser=!1}).catch(function(e){console.log(["saveTrackerUser error",e])})},addTracker:function(){this.currentTracker={id:0,title:"",api_url:"",type:"redmine"},this.showTrackerModal()},editTracker:function(e){this.currentTracker=e,this.showTrackerModal()},showTokenModal:function(e){this.loginToken="",this.passwordToken="",this.currentTracker=e,this.showToken=!0},showUserModal:function(e){"evo"===e.type&&(this.currentTracker=e,this.showUser=!0)},closeTokenModal:function(){this.showToken=!1},closeUserModal:function(){this.showUser=!1},getToken:function(){var e=this;n.b.getToken(this.currentTracker.id,this.loginToken,this.passwordToken).then(function(t){console.log(t),void 0!==t.data.external_token&&""!==t.data.external_token?(e.getTrackers(),"evo"===e.currentTracker.type&&e.getEvoUsers(),e.showToken=!1):alert("Токен не получен")}).catch(function(e){console.log(["getToken error",e])})}},components:{Modal:a("/o5o").default},mounted:function(){this.getTrackers(),this.getEvoUsers()}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"md-layout md-gutter md-alignment-top-center center"},[a("div",{staticClass:"md-layout-item md-size-80"},[a("md-list",[a("md-list-item",[e._v("\n          Трекеры\n        ")]),e._v(" "),a("md-table",[a("md-table-row",[a("md-table-head"),e._v(" "),a("md-table-head",[e._v("Название")]),e._v(" "),a("md-table-head",[e._v("Url")]),e._v(" "),a("md-table-head",[e._v("Тип")]),e._v(" "),a("md-table-head",[e._v("Токен")]),e._v(" "),a("md-table-head",[e._v("Пользователь")])],1),e._v(" "),e._l(e.trackers,function(t){return a("md-table-row",{key:t.id},[a("md-table-head",[a("div",{staticClass:"edit-icon",on:{click:function(a){e.editTracker(t)}}},[a("font-awesome-icon",{attrs:{icon:"edit"}}),e._v(" "),a("md-tooltip",{attrs:{"md-direction":"top"}},[e._v("Редактировать")])],1)]),e._v(" "),a("md-table-head",[e._v(e._s(t.title))]),e._v(" "),a("md-table-head",[e._v(e._s(t.api_url))]),e._v(" "),a("md-table-head",[e._v(e._s(t.type))]),e._v(" "),a("md-table-head",[a("a",{staticClass:"simple-link",on:{click:function(a){e.showTokenModal(t)}}},[a("md-tooltip",{attrs:{"md-direction":"top"}},[e._v("Авторизация на трекере")]),e._v(" "),t.external_api_key?a("span",[e._v(e._s(t.external_api_key))]):e._e(),e._v(" "),t.external_api_key?e._e():a("span",[e._v("Получить токен")])],1)]),e._v(" "),a("md-table-head",[t.external_api_key?a("a",{staticClass:"simple-link",on:{click:function(a){e.showUserModal(t)}}},[t.external_user_id||"evo"!==t.type?e._e():a("span",[e._v("Указать пользователя")]),e._v(" "),t.external_user_id?a("span",[e._v(e._s(t.external_user_id))]):e._e()]):e._e()])],1)})],2),e._v(" "),a("md-list-item",[a("md-button",{on:{click:function(t){e.addTracker()}}},[e._v("Добавить redmine")])],1)],1)],1),e._v(" "),a("br"),a("br"),e._v(" "),a("div",{staticClass:"md-layout-item md-size-80"},[a("md-list",[a("md-list-item",[e._v("\n          Проекты\n        ")]),e._v(" "),a("md-table",[a("md-table-row",[a("md-table-head"),e._v(" "),a("md-table-head",[e._v("Название")]),e._v(" "),a("md-table-head",[e._v("Url")]),e._v(" "),a("md-table-head",[e._v("Тип")]),e._v(" "),a("md-table-head",[e._v("Токен")])],1),e._v(" "),e._l(e.projects,function(t){return a("md-table-row",{key:t.id},[a("md-table-head",[a("div",{on:{click:function(a){e.editProject(t.id)}}},[a("font-awesome-icon",{attrs:{icon:"edit"}})],1)]),e._v(" "),a("md-table-head",[e._v(e._s(t.title))]),e._v(" "),a("md-table-head",[e._v(e._s(t.api_url))]),e._v(" "),a("md-table-head",[e._v(e._s(t.type))]),e._v(" "),a("md-table-head",[e._v(e._s(t.external_api_key))])],1)})],2),e._v(" "),a("md-list-item",[a("md-button",[e._v("Добавить")])],1)],1)],1)]),e._v(" "),a("modal",{attrs:{show:e.showTracker},on:{close:e.closeTrackerModal}},[a("div",{staticClass:"modal-header"}),e._v(" "),a("div",{staticClass:"modal-body"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.currentTracker.id,expression:"currentTracker.id"}],attrs:{type:"hidden",name:"id"},domProps:{value:e.currentTracker.id},on:{input:function(t){t.target.composing||e.$set(e.currentTracker,"id",t.target.value)}}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.currentTracker.type,expression:"currentTracker.type"}],attrs:{type:"hidden",name:"type"},domProps:{value:e.currentTracker.type},on:{input:function(t){t.target.composing||e.$set(e.currentTracker,"type",t.target.value)}}}),e._v(" "),a("md-field",[a("label",[e._v("Название")]),e._v(" "),a("md-input",{model:{value:e.currentTracker.title,callback:function(t){e.$set(e.currentTracker,"title",t)},expression:"currentTracker.title"}})],1),e._v(" "),a("md-field",[a("label",[e._v("Url")]),e._v(" "),a("md-input",{model:{value:e.currentTracker.api_url,callback:function(t){e.$set(e.currentTracker,"api_url",t)},expression:"currentTracker.api_url"}})],1)],1),e._v(" "),a("div",{staticClass:"modal-footer text-right"},[a("md-button",{staticClass:"md-primary",on:{click:e.deleteTracker}},[e._v("удалить")]),e._v(" "),a("md-button",{staticClass:"md-primary",on:{click:e.closeTrackerModal}},[e._v("отмена")]),e._v(" "),a("md-button",{staticClass:"md-accent",on:{click:e.saveTracker}},[e._v("сохранить")])],1)]),e._v(" "),a("modal",{attrs:{show:e.showToken},on:{close:e.closeTokenModal}},[a("div",{staticClass:"modal-header"},[a("h2",[e._v("Данные для авторизации в "+e._s(e.currentTracker.title))])]),e._v(" "),a("div",{staticClass:"modal-body"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.currentTracker.id,expression:"currentTracker.id"}],attrs:{type:"hidden",name:"id"},domProps:{value:e.currentTracker.id},on:{input:function(t){t.target.composing||e.$set(e.currentTracker,"id",t.target.value)}}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.currentTracker.type,expression:"currentTracker.type"}],attrs:{type:"hidden",name:"type"},domProps:{value:e.currentTracker.type},on:{input:function(t){t.target.composing||e.$set(e.currentTracker,"type",t.target.value)}}}),e._v(" "),a("md-field",[a("label",[e._v("Логин")]),e._v(" "),a("md-input",{model:{value:e.loginToken,callback:function(t){e.loginToken=t},expression:"loginToken"}})],1),e._v(" "),a("md-field",[a("label",[e._v("Пароль")]),e._v(" "),a("md-input",{attrs:{type:"password"},model:{value:e.passwordToken,callback:function(t){e.passwordToken=t},expression:"passwordToken"}})],1)],1),e._v(" "),a("div",{staticClass:"modal-footer text-right"},[a("md-button",{staticClass:"md-primary",on:{click:e.closeTokenModal}},[e._v("отмена")]),e._v(" "),a("md-button",{staticClass:"md-accent",on:{click:e.getToken}},[e._v("получить")])],1)]),e._v(" "),a("modal",{attrs:{show:e.showUser}},[a("div",{staticClass:"modal-header"},[a("h2",[e._v("Выберите пользователя в "+e._s(e.currentTracker.title))])]),e._v(" "),a("div",{staticClass:"modal-body"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.currentTracker.id,expression:"currentTracker.id"}],attrs:{type:"hidden",name:"id"},domProps:{value:e.currentTracker.id},on:{input:function(t){t.target.composing||e.$set(e.currentTracker,"id",t.target.value)}}}),e._v(" "),a("v-select",{attrs:{options:e.evoUsers},model:{value:e.evoUser,callback:function(t){e.evoUser=t},expression:"evoUser"}})],1),e._v(" "),a("div",{staticClass:"modal-footer text-right"},[a("md-button",{staticClass:"md-primary",on:{click:e.closeUserModal}},[e._v("отмена")]),e._v(" "),a("md-button",{staticClass:"md-accent",on:{click:e.saveEvoUser}},[e._v("сохранить")])],1)])],1)},staticRenderFns:[]};var o=a("VU/8")(s,r,!1,function(e){a("6QcU")},"data-v-6eb3d453",null);t.default=o.exports},q3Hp:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Ppbp"),s=a.n(n),r=a("rrOh"),o={data:function(){return{selectedDate:{start:new Date,end:new Date},time:[new Date,new Date],shortcuts:[{text:"сегодня",start:new Date,end:new Date},{text:"вчера",start:new Date((new Date).setDate((new Date).getDate()-1)),end:new Date((new Date).setDate((new Date).getDate()-1))},{text:"эта неделя",start:new Date((new Date).setDate((new Date).getDate()-((new Date).getDay()||7)+1)),end:new Date((new Date).setDate((new Date).getDate()-((new Date).getDay()||7)+7))},{text:"прошлая",start:new Date((new Date).setDate((new Date).getDate()-((new Date).getDay()||7)-6)),end:new Date((new Date).setDate((new Date).getDate()-((new Date).getDay()||7)))}]}},methods:{onDateSelected:function(e){2===e.length&&null!==e[0]&&null!==e[1]&&(this.selectedDate.start=e[0],this.selectedDate.end=e[1],this.$refs.grouped_tasks.selectedDate=this.selectedDate,this.refreshData())},refreshData:function(){this.$refs.grouped_tasks.getTasks()}},components:{DatePicker:s.a,ExportTasks:r.default},mounted:function(){this.$refs.rangeDatePicker.dateRange=this.selectedDate}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"md-layout md-gutter md-alignment-top-center center"},[a("div",{staticClass:"md-layout-item md-size-50"},[a("date-picker",{ref:"rangeDatePicker",attrs:{"first-day-of-week":1,confirm:"",lang:"ru",range:"",format:"DD.MM.YYYY",shortcuts:e.shortcuts},on:{change:e.onDateSelected},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1)]),e._v(" "),a("ExportTasks",{ref:"grouped_tasks",attrs:{initialDate:e.selectedDate},on:{update:function(t){e.refreshData()}}})],1)},staticRenderFns:[]},c=a("VU/8")(o,i,!1,null,null,null);t.default=c.exports},"s6+2":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("lO7g"),s=a("yZHR"),r=a("J+R/"),o=a("q3Hp"),i=a("niH5"),c=a("WdI8"),d={data:function(){return{currentComponent:"Auth",loginText:"Выйти",isLogin:!1}},components:{Home:n.default,History:s.default,Auth:r.default,Export:o.default,Settings:i.default},methods:{updateLogin:function(){this.isLogin=Object(c.b)(),this.loginText=this.isLogin?"Выйти":"Войти",this.currentComponent=this.isLogin?"Home":"Auth"},go:function(e){"Auth"===e?(this.isLogin&&Object(c.c)(),this.updateLogin()):this.isLogin?this.currentComponent=e:this.updateLogin()}},mounted:function(){this.updateLogin()}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("nav",[a("div",{staticClass:"md-toolbar md-accent md-theme-demo-light md-elevation-1"},[a("div",{staticClass:"md-title main-title"},[e._v("Time tracker")]),e._v(" "),e.isLogin?a("button",{staticClass:"md-button md-theme-demo-light",attrs:{type:"button"},on:{click:function(t){e.go("Home")}}},[e._m(0)]):e._e(),e._v(" "),e.isLogin?a("button",{staticClass:"md-button md-theme-demo-light",attrs:{type:"button"}},[a("div",{staticClass:"md-ripple"},[a("div",{staticClass:"md-button-content",on:{click:function(t){e.go("History")}}},[e._v("История")])])]):e._e(),e._v(" "),e.isLogin?a("button",{staticClass:"md-button md-theme-demo-light",attrs:{type:"button"}},[a("div",{staticClass:"md-ripple"},[a("div",{staticClass:"md-button-content",on:{click:function(t){e.go("Export")}}},[e._v("Экспорт")])])]):e._e(),e._v(" "),e.isLogin?a("button",{staticClass:"md-button md-theme-demo-light",attrs:{type:"button"}},[a("div",{staticClass:"md-ripple"},[a("div",{staticClass:"md-button-content",on:{click:function(t){e.go("Settings")}}},[e._v("Настройки")])])]):e._e(),e._v(" "),a("button",{staticClass:"md-button md-theme-demo-light",attrs:{type:"button"}},[a("div",{staticClass:"md-ripple"},[a("div",{staticClass:"md-button-content",on:{click:function(t){e.go("Auth")}}},[e._v(e._s(e.loginText))])])])])]),e._v(" "),a("div",{staticClass:"container",attrs:{id:"main"}},[a(e.currentComponent,{tag:"component",on:{login:e.updateLogin}})],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"md-ripple"},[t("div",{staticClass:"md-button-content"},[this._v("Главный экран")])])}]};var u=a("VU/8")(d,l,!1,function(e){a("OVkK")},null,null);t.default=u.exports},yZHR:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Ppbp"),s=a.n(n),r=a("N1EC"),o={data:function(){return{selectedDate:{start:new Date,end:new Date},time:[new Date,new Date],shortcuts:[{text:"сегодня",start:new Date,end:new Date},{text:"вчера",start:new Date((new Date).setDate((new Date).getDate()-1)),end:new Date((new Date).setDate((new Date).getDate()-1))},{text:"эта неделя",start:new Date((new Date).setDate((new Date).getDate()-((new Date).getDay()||7)+1)),end:new Date((new Date).setDate((new Date).getDate()-((new Date).getDay()||7)+7))},{text:"прошлая",start:new Date((new Date).setDate((new Date).getDate()-((new Date).getDay()||7)-6)),end:new Date((new Date).setDate((new Date).getDate()-((new Date).getDay()||7)))},{text:"месяц",start:new Date((new Date).setDate(1)),end:new Date(new Date(new Date((new Date).setDate(1)).setMonth((new Date).getMonth()+1)).setDate(0))},{text:"прошлый",start:new Date(new Date((new Date).setDate(1)).setMonth((new Date).getMonth()-1)),end:new Date(new Date((new Date).setDate(1)).setDate(0))}]}},methods:{onDateSelected:function(e){2===e.length&&null!==e[0]&&null!==e[1]&&(this.selectedDate.start=e[0],this.selectedDate.end=e[1],this.$refs.tasks.selectedDate=this.selectedDate,this.$refs.tasks.getTasks())},refreshData:function(){this.$refs.tasks.getTasks()}},components:{DatePicker:s.a,Tasks:r.default},mounted:function(){this.$refs.rangeDatePicker.dateRange=this.selectedDate}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"md-layout md-gutter md-alignment-top-center center"},[a("div",{staticClass:"md-layout-item md-size-50"},[a("date-picker",{ref:"rangeDatePicker",attrs:{"first-day-of-week":1,confirm:"",lang:"ru",range:"",format:"DD.MM.YYYY",shortcuts:e.shortcuts},on:{change:e.onDateSelected},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1)]),e._v(" "),a("Tasks",{ref:"tasks",attrs:{initialDate:e.selectedDate},on:{update:function(t){e.refreshData()}}})],1)},staticRenderFns:[]},c=a("VU/8")(o,i,!1,null,null,null);t.default=c.exports}});
//# sourceMappingURL=1.5624bafeffe0678f02aa.js.map